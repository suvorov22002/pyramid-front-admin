<div class="mat-elevation-z8 w100">
    <mat-card class="flex-container">
        <div class="grid-container">

            <mat-form-field appearance="fill" [style.fontSize.px]="12">
                <mat-label>Filter</mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="Filter" #input>
            </mat-form-field>

            <mat-form-field appearance="fill" [style.fontSize.px]="12">
                <mat-select placeholder="Partenaire" name="code_partner" [(ngModel)]="code_partner"
                    (selectionChange)="onSelectBetPartner()">
                    <mat-option *ngFor="let partner of allPartners"
                        [value]="partner">{{partner.designation}}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field appearance="fill" [style.fontSize.px]="12">
                <mat-select placeholder="Salle" name="code_salle" [(ngModel)]="code_salle"
                    (selectionChange)="onSelectRoom()">
                    <mat-option *ngFor="let salle of allSalles" [value]="salle">{{salle.designation}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="button-ma">
            <button nbButton matRipple status="info" (click)="onLoadEnroll()">
                <nb-icon class="action-icon" icon='refresh'></nb-icon>
            </button>
        </div>

    </mat-card>

</div>

<div class="mat-elevation-z8 w100" style="overflow-x:auto;">

    <nb-card [nbSpinner]="isLoading" nbSpinnerSize="giant" nbSpinnerStatus="warning">

        <mat-table [dataSource]="dataSource" matSort>

            <!-- Code Date Column -->
            <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Date </mat-header-cell>
                <mat-cell *matCellDef="let row"> {{row.createdAt | date:'short'}} </mat-cell>
            </ng-container>

            <!-- code Column -->
            <ng-container matColumnDef="code">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Code Barre </mat-header-cell>
                <mat-cell *matCellDef="let row"> {{row.barcode}} </mat-cell>
            </ng-container>

            <!-- game Column -->
            <ng-container matColumnDef="game">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Jeu </mat-header-cell>
                <mat-cell *matCellDef="let row"> {{row.codeGame}} </mat-cell>
            </ng-container>

            <!-- mise Column -->
            <ng-container matColumnDef="mise">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Montant Mise </mat-header-cell>
                <mat-cell *matCellDef="let row"> {{row.montantMise}} </mat-cell>
            </ng-container>


            <!-- gain Column -->
            <ng-container matColumnDef="gain">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Montant Gain </mat-header-cell>
                <mat-cell *matCellDef="let row"> {{row.montantGainMax}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="etat">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Etat Ticket </mat-header-cell>
                <mat-cell *matCellDef="let row"> {{row.status}} </mat-cell>
            </ng-container>

            <ng-container matColumnDef="edit">
                <mat-header-cell *matHeaderCellDef mat-sort-header> Action </mat-header-cell>
                <mat-cell *matCellDef="let row" class="action-link">
                    <button mat-icon-button color="primary" matTooltip="delete" (click)="handleDeleteAction(row)">
                        <mat-icon>delete</mat-icon>
                    </button>
                    <mat-slide-toggle (change)="onChange($event.checked, row.id)"
                        matTooltip="Activate or Deactivate partner" [checked]="'true'"></mat-slide-toggle>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="displayedColumns;sticky:true"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>
    </nb-card>
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</div>